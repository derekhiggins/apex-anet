working_dir: "/root/apex-anet"
apex_repo: "https://github.com/radez/apex"
apex_repo_version: master
clean_images: false
force_image_build: false
vagrant_box_source: "http://10.8.125.119/vagrant"

clean_apex_vms: false
clean_vagrant_vms: false
---
vqfx_expect_responses:
  'Password:': 'Juniper'
  'root@:RE:0%': 'cli'
  'root>': 'config'
  'root#':
    - 'set interfaces em1 unit 0 family inet address 169.254.0.2/24'
    - 'commit'
    - 'exit'
  'root>':
    - 'restart chassis-control'
    - 'exit'
  'root@:RE:0%': 'sh'
  '#' : 'while [ ! $(ifconfig | grep xe-0) ] ; do sleep 1 ; done ;'
  '#' : 'exit'
  'root@:RE:0%': 'cli'
  'root>' : 'config'
  'root#'
    - 'set vlans br-tenant vlan-id 37'
    - 'set interfaces interface-range br-tenant member-range xe-0/0/0 to xe-0/0/1'
    - 'set interfaces interface-range br-tenant unit 0 family ethernet-switching vlan members br-tenant'
    - 'set interfaces interface-range br-ctlplane member-range xe-0/0/2 to xe-0/0/4'
    - 'set interfaces interface-range br-ctlplane unit 0 family ethernet-switching vlan members default'
    - 'set interfaces xe-0/0/5 unit 0 family ethernet-switching vlan members default'
      # to setup trunk mode on a port
    - 'set interfaces interface-range br-tenant native-vlan-id 37'
    - 'delete interfaces interface-range br-tenant unit 0 family ethernet-switching vlan members br-tenant'
    - 'set interfaces interface-range br-tenant unit 0 family ethernet-switching interface-mode trunk'
    - 'set interfaces interface-range br-tenant unit 0 family ethernet-switching vlan members br-tenant'
  'root#' : 'commit'
  'root#' : 'exit'
